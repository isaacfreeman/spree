<div data-hook="admin_product_form_fields">

  <div class="eleven columns alpha">
    <fieldset data-hook="admin_product_form_product_details">
      <legend><%= icon('edit') %>Product Details</legend>
      <%= render partial: "spree/admin/products/product_details_fields", locals: {f: f} %>
    </fieldset>
  </div>
  <div class="five columns omega">
    <fieldset data-hook="admin_product_form_meta">
      <legend>SEO</legend>
      <%= render partial: "spree/admin/products/seo_fields", locals: {f: f} %>
    </fieldset>
  </div>

  <fieldset id="admin_product_form_master_variant" style="<%= 'display:none;' if @product.has_variants? %>" class="sixteen columns alpha omega clearfix" data-hook="admin_product_form_master_variant">
    <legend><%= icon('th-large') %>Master Variant</legend>
    <ul class="toolbar inline-menu fieldset-menu" data-hook="toolbar-product-properties">
      <% if can?(:admin, Spree::Variant) %>
        <li>
          <%= button_link_to 'Manage Variants',  admin_product_variants_url(@product), :icon => 'th-large', id: 'add_variants' %>
        </li>
      <% end %>
    </ul>
    <%= render partial: "spree/admin/variants/master_variant_fields", locals: {variant: @product.master, f: f} %>
  </fieldset>

  <% if can?(:admin, Spree::Variant) %>
    <fieldset id="admin_product_form_multiple_variants" style="<%= 'display:none;' unless @product.has_variants? %>" class="sixteen columns alpha omega clearfix" data-hook="admin_product_form_multiple_variants">
      <legend>
        <%= icon('th-large') %>Variants
      </legend>
      <%= render partial: "spree/admin/products/option_types", locals: {f: f} %>
      <%= render partial: "spree/admin/products/variants", locals: {f: f} %>
    </fieldset>
  <% end %>

  <fieldset id="admin_product_form_product_properties" class="sixteen columns alpha omega clearfix" data-hook="admin_product_form_product_properties">
    <legend><%= icon('th-large') %>Properties</legend>
    <ul class="toolbar inline-menu fieldset-menu" data-hook="toolbar-product-properties">
      <% if can?(:admin, Spree::ProductProperty) %>
      <li>
        <%= button_link_to 'Manage Properties', admin_product_product_properties_url(@product), :icon => 'tasks', id: 'manage_properties' %>
      </li>
      <% end %>
    </ul>
    <div class="fields" style="<%= 'display:none;' unless @product.has_properties? %>">
      <%= render partial: "spree/admin/product_properties/product_properties", locals: {f: f} %>
    </div>
  </fieldset>

  <fieldset id="admin_product_form_images" data-hook="admin_product_form_images" class="alpha omega sixteen columns">
    <legend>Images</legend>
    <ul class="toolbar inline-menu fieldset-menu" data-hook="toolbar-product-images">
      <% if can?(:admin, Spree::Image) %>
      <li>
        <%= button_link_to 'Manage Images', admin_product_images_url(@product), :icon => 'tasks', id: 'manage_images' %>
      </li>
      <% end %>
    </ul>
    <div class="fields" style="<%= 'display:none;' unless @product.has_images? %>">
      <%= f.fields_for :master, @product.master do |mvf| %>
        <%= render partial: "spree/admin/images/images", locals: {f: mvf, variant: @product.master, is_master: true} %>
      <% end %>
    </div>
  </fieldset>

  <div class="clear"></div>

  <div data-hook="admin_product_form_additional_fields"></div>

  <div class="clear"></div>
</div>

<%= render partial: 'spree/admin/variants/variant_handlebars_template' %>
<%= render partial: 'spree/admin/images/image_handlebars_template' %>
<%= render partial: 'spree/admin/product_properties/product_property_handlebars_template' %>
